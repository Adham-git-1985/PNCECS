/* Loader shim for PDF.js main library (pdf.min.js)
   Place this at: static/vendor/pdfjs/pdf.min.js
   It will try to load a local copy first (pdf.local.min.js), otherwise fall back to CDN.
   Target version: 3.10.177
*/
(function(){
  function load(src, ok, fail){
    var s = document.createElement('script');
    s.src = src;
    s.onload = ok;
    s.onerror = fail || function(e){ console.error('Failed to load', src, e); };
    document.head.appendChild(s);
  }
  function ready(){
    if (window.pdfjsLib) {
      try { document.dispatchEvent(new CustomEvent('PDFJS_READY')); } catch(_) {}
    } else {
      console.error('pdfjsLib not loaded after attempts.');
    }
  }
  var local = (location.origin || '') + '/static/vendor/pdfjs/pdf.local.min.js';
  load(local, function(){ console.log('[pdf.js] Loaded local pdf.local.min.js'); ready(); }, function(){
    var cdn = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.10.177/pdf.min.js';
    console.log('[pdf.js] Local not found; trying CDNâ€¦');
    load(cdn, function(){ console.log('[pdf.js] Loaded CDN pdf.min.js'); ready(); });
  });
})();